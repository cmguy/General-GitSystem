<html>
    <head>
        <!-- MS Word on Windows doesn't realise the encoding is UTF-8 unless this meta tag is present -->
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <base href="https://wiki.io.comcast.net" />
        <title>Git Repo System Admin Guide</title>
        <style>
            body, p, td, table, tr, .bodytext, .stepfield {
	            font-family: Verdana, arial, sans-serif;
            }
            .panel {
                margin: 10px;
                padding: 10px;
                border: 1px solid #999;
                background-color: #f0f0f0;
            }
            .noteMacro { border-style: solid; border-width: 1px; border-color: #F0C000; background-color: #FFFFCE; text-align:left;}
            .warningMacro { border-style: solid; border-width: 1px; border-color: #c00; background-color: #fcc; text-align:left;}
            .infoMacro { border-style: solid; border-width: 1px; border-color: #69c; background-color: #D8E4F1; text-align:left;}
            .tipMacro { border-style: solid; border-width: 1px; border-color: #090; background-color: #dfd; text-align:left;}
            .informationMacroPadding { padding: 5px 0 0 5px; }

            table.infoMacro td, table.warningMacro td, table.tipMacro td, table.noteMacro td, table.sectionMacro td {
                border: none;
            }

            .grid {
                margin: 2px 0px 5px 0px;
                border-collapse: collapse;
            }
            .grid th  {
                border: 1px solid #ccc;
                padding: 2px 4px 2px 4px;
                background: #f0f0f0;
                text-align: center;
            }
            .grid td  {
                border: 1px solid #ccc;
                padding: 3px 4px 3px 4px;
            }            
        </style>
    </head>

    <body style="background-color: white; padding: 10px;">
        <h1>Git Repo System Admin Guide</h1>
        
<style>
.this-toc {
width: 275px;
float: right;
margin: 0px 0px 20px 20px;
padding: 5px;
}

.this-toc ul {
padding-left: 6px;
margin-left: 6px;
}
</style>

<div class="this-toc">
 <div class="panel" style="border-width: 1px;"><div class="panelHeader" style="border-bottom-width: 1px;"><b>Table of Contents</b></div><div class="panelContent">
<div>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-Overview'>Overview</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-Prerequisites'>Prerequisites</a></li>
    <li><a href='#GitRepoSystemAdminGuide-Access'>Access</a></li>
    <li><a href='#GitRepoSystemAdminGuide-OperatingSystems'>Operating Systems</a></li>
    <li><a href='#GitRepoSystemAdminGuide-ApplicationUsers'>Application Users</a></li>
    <li><a href='#GitRepoSystemAdminGuide-NetworkDNSNames'>Network DNS Names</a></li>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-Applications'>Applications</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-AdministratorCommunication'>Administrator Communication</a></li>
    <li><a href='#GitRepoSystemAdminGuide-Git'>Git</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-CompileandInstall'>Compile and Install</a></li>
    <li><a href='#GitRepoSystemAdminGuide-InstallManPages'>Install Man Pages</a></li>
    <li><a href='#GitRepoSystemAdminGuide-Verify'>Verify</a></li>
    <li><a href='#GitRepoSystemAdminGuide-GitUpgradeProcedure'>Git Upgrade Procedure</a></li>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-Apache'>Apache</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-Installhttpd'>Install httpd</a></li>
    <li><a href='#GitRepoSystemAdminGuide-ConfigureApache'>Configure Apache</a></li>
    <li><a href='#GitRepoSystemAdminGuide-ConfigureVirtualHosts'>Configure Virtual Hosts</a></li>
    <li><a href='#GitRepoSystemAdminGuide-ConfigureandInstallIndexPages'>Configure and Install Index Pages</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-RestartApacheandTest'>Restart Apache and Test</a></li>
</ul>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-Gotolite'>Gotolite</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-PreInstall'>Pre-Install</a></li>
    <li><a href='#GitRepoSystemAdminGuide-Install'>Install</a></li>
    <li><a href='#GitRepoSystemAdminGuide-Adjustthesystemlogonbanner'>Adjust the system logon banner</a></li>
    <li><a href='#GitRepoSystemAdminGuide-GitoliteNewSystemandRestoreNotes'>Gitolite New System and Restore Notes</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-SystemRestore'>System Restore</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-NewPrimarySystem%28emmgit1%29'>New Primary System (emm-git1)</a></li>
    <li><a href='#GitRepoSystemAdminGuide-NewFailOverSystem%28emmgit2%29'>New Fail-Over System (emm-git2)</a></li>
</ul>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-UpgradingGitolite'>Upgrading Gitolite</a></li>
    <li><a href='#GitRepoSystemAdminGuide-GitoliteAdmininstration'> Gitolite Admininstration</a></li>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-GitWeb'>GitWeb</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-GitWebMaintenance'>GitWeb Maintenance</a></li>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-GitoliteAdminUpdatesPerformed'>Gitolite Admin Updates Performed</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-Tosetupprojectorreponameforhttpreadaccess%3A'>To setup project or repo-name for http read access:</a></li>
    <li><a href='#GitRepoSystemAdminGuide-FixGitoliteversionindicator'>Fix Gitolite version indicator</a></li>
    <li><a href='#GitRepoSystemAdminGuide-AddDescriptionforgitoliteadminrepo%3A'>Add Description for gitolite-admin repo:</a></li>
    <li><a href='#GitRepoSystemAdminGuide-RenamingaGitoliterepo'>Renaming a Gitolite repo</a></li>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-AdminTasks'>Admin Tasks</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-Backups'>Backups</a></li>
    <li><a href='#GitRepoSystemAdminGuide-Turnoffwelcome.confin%2Fetc%2Fhttpd%2Fconf.d'>Turn off welcome.conf in /etc/httpd/conf.d</a></li>
    <li><a href='#GitRepoSystemAdminGuide-VerifyApachesyntax%3A'>Verify Apache syntax:</a></li>
    <li><a href='#GitRepoSystemAdminGuide-Testwithsampleindex.htmlfilein%2Fopt%2Fgit.'>Test with sample index.html file in /opt/git.</a></li>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-ErrorsEncountered'>Errors Encountered</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-Thesshkeyisworkingbutunabletoclonerepo'>The ssh key is working but unable to clone repo</a></li>
    <li><a href='#GitRepoSystemAdminGuide-GitWebprojects.listNotWorkingCorrectly'>GitWeb projects.list Not Working Correctly</a></li>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-Inordertoclone%2Cthesyntaxisasfollows%3A'>In order to clone, the syntax is as follows:</a></li>
    <li><a href='#GitRepoSystemAdminGuide-InstallpythonSetupTools'>Install python Setup Tools</a></li>
<ul>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-Apacheservice%3A'>Apache service:</a></li>
</ul>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-BranchingModel'>Branching Model</a></li>
</ul>
    <li><a href='#GitRepoSystemAdminGuide-UsefulLinks'>Useful Links</a></li>
<ul>
    <li><a href='#GitRepoSystemAdminGuide-SupportingDocuments'>Supporting Documents</a></li>
</ul>
</ul></div>
</div></div> 
</div>

<!--div style="clear: both;"></div-->


<h2><a name="GitRepoSystemAdminGuide-Overview"></a>Overview</h2>

<p>The intended audience for this Administrative Guide is the Event Management &amp; Mediation (EM&amp;M), (formerly Converged Event Management Platform (CEMP)), Configuration Management (CM) group. The associated user guide for this admin guide is the <a href="https://wiki.io.comcast.net/pages/viewpage.action?pageId=227392710">EM&amp;M Git Users Guide</a>.  The Git repo CFX-EMM-GITSystem is maintained with all files used to setup and maintain the EMM GIT Repository System.</p>

<p>The (EM&amp;M) CM Repository System is where version management of EM&amp;M source code and other elements occurs. The DNS names of the servers involved are:</p>
<ul>
	<li><a href="http://emm-git1.sys.comcast.net">emm-git1.sys.comcast.net</a> emmputl-po-7p.sys.comcast.net with an IP of 172.28.98.231.</li>
	<li><a href="http://emm-git2.sys.comcast.net">emm-git2.sys.comcast.net</a> cmputl-ch2-4p.sys.comcast.net with an IP of 172.28.179.157.</li>
</ul>


<p>This system is based on the <a href="http://en.wikipedia.org/wiki/Git_(software)">Git</a> tool. Administration of the Git repositories is being done with <a href="http://gitolite.com/gitolite/master-toc.html">Gitolite</a>. The emm-git1 server is primary server and the emm-git2 server is the fail-over that is fully restored on a daily basis.</p>

<p><b>Notes:</b></p>
<ol>
	<li>The logon banners for the servers in this system has been adjusted since the git user access will be limited to gitolite controlled ssh sessions. Both emm-git:/etc/issue and emm-git:/etc/issue.net have been adjusted accordingly.</li>
	<li>The files emm-git1,2:/root/README.txt file is maintained to communicate with any analyst that logs onto this system as "root" the intent and purpose of this system. This wiki document location is also mention in this README.txt file via the main primary index.html server files.</li>
	<li>Followed instructions for <a href="https://wiki.io.comcast.net/display/IDEA/Atlas+Client?showComments=true&amp;showCommentArea=true#addcomment">Atlas Client</a>. Also did the following:
	<ol>
		<li>cd /etc/yum.repos.d/ &amp;&amp; mkdir OLD_REPOS/ &amp;&amp; mv atlas* OLD_REPOS/</li>
		<li>Add a new the RHEL 6.x x86_64 repo:</li>
		<li>atlas-client repo-join --repo-id 92</li>
		<li>Clean up Yum:
		<ol>
			<li>yum clean all</li>
			<li>yum list # This will download all package definitions</li>
		</ol>
		</li>
	</ol>
	</li>
</ol>


<h3><a name="GitRepoSystemAdminGuide-Prerequisites"></a>Prerequisites</h3>

<p>VM servers where setup using the <a href="https://servicecatalog.cable.comcast.com/sc/default.asp">Service Catalog</a> and entering "vm setup" in the search window, then click on <b>Go</b>.</p>

<p><span class="image-wrap" style=""><a class="confluence-thumbnail-link 960x325" href='https://wiki.io.comcast.net/download/attachments/162731027/SC-VMsetup.PNG'><img src="/download/thumbnails/162731027/SC-VMsetup.PNG" style="border: 1px solid black" /></a></span></p>

<p>Select "Add New VM" and a window will be opened for setting up a request for a new VM system.</p>

<p><span class="image-wrap" style=""><a class="confluence-thumbnail-link 956x450" href='https://wiki.io.comcast.net/download/attachments/162731027/SC-addnewVM.PNG'><img src="/download/thumbnails/162731027/SC-addnewVM.PNG" style="border: 1px solid black" /></a></span></p>

<p>You need to be aware of how the new VM will be added to the <a href="https://itrc.io.comcast.net/">iTRC System</a>.</p>

<p>Verify the VM server(s) have been setup in CADA Host Table <a href="https://cada.comcast.net/host_group/show/SEO_Unix_Cemp_CM">SEO_Unix_Cemp_CM</a>. If not, open JIRA issue with <a href="http://tkts.sys.comcast.net/browse/AC">NSO Access Control</a>: (This is what should be opened by the <a href="https://servicecatalog.cable.comcast.com/sc/default.asp">Service Catalog</a> via Infrastructure Services -&gt; Access Request -&gt; Host Access Requests -&gt; Linux/Unix CADA Kerberos Hosts )</p>
<ol>
	<li>Open JIRA AC project Issue, Type is Task</li>
	<li>In summary, "Add new Host(s) to CADA Host Group"</li>
	<li>Select "GUI Access - RSA or CADA" in Component/s field pulldown</li>
	<li>Add text in Description of JIRA issue like this example:<br/>
 "Please add host <a href="https://cada.comcast.net/host/show/emmutl-po-7p.sys.comcast.net">emmutl-po-7p.sys.comcast.net</a> to EMM CADA Host Group <a href="https://cada.comcast.net/host_group/show/SEO_Unix_Cemp_CM">SEO_Unix_Cemp_CM</a>."</li>
	<li>CC EM&amp;M CM Team, and any other appropriate manager(s) on this ticket.<br/>
<b>Note:</b> - Reference example ticket <a href="http://tkts.sys.comcast.net/browse/AC-26941">AC-26941</a>.</li>
</ol>


<p>Verify CM team logon. May need to open Service Catalog ticket for the SAs to install the CADA RPMs on the server.</p>

<p>The access protocols supported for Git on this system are:</p>
<ul>
	<li>http - read only</li>
	<li>ssh - read write</li>
</ul>


<h3><a name="GitRepoSystemAdminGuide-Access"></a>Access</h3>

<p>Access to this system is controlled by <a href="https://cada.comcast.net/">CADA</a>, host group <a href="https://cada.comcast.net/host_group/show/SEO_Unix_Cemp_CM">SEO_Unix_Cemp_CM</a> via <a href="https://itrc.io.comcast.net">iTRC</a> application <a href="https://itrc.io.comcast.net/apps/cemp-versioning-system">EM&amp;M Versioning System</a>. Once conversion from the <a href="http://cmputl-po-3p/viewvc/cvsroot/">CEMP CVS repository</a> to <a href="http://emm-git/git/">EMM-GIT</a> is complete, the CADA host group SEO_Unix_CEMP_CM can have most all user groups removed from it's association other than CADA User group <a href="https://cada.comcast.net/user_group/show/SEO_Unix_Cemp_CM_Admins">SEO_Unix_Cemp_CM_Admins</a>.</p>

<p>Git user read/write access is via ssh keys. Git user read only access using <a href="https://git.wiki.kernel.org/index.php/Gitweb">Gitweb</a> via <a href="http://emm-git1.sys.comcast.net">emm-git1.sys.comcast.net</a> primary server and <a href="http://emm-git2.sys.comcast.net">emm-git2.sys.comcast.net</a> fail-over server.</p>

<h3><a name="GitRepoSystemAdminGuide-OperatingSystems"></a>Operating Systems</h3>

<p>The CEMP CM repository system is based on the CentOS deployed GNU/Linux operating system.</p>

<p>[root@emmutl-po-7p ~]# cat /etc/&#42;release&#42;<br/>
CentOS release 6.4 (Final)<br/>
LSB_VERSION=base-4.0-amd64:base-4.0-noarch:core-4.0-amd64:core-4.0-noarch:graphics-4.0-amd64:graphics-4.0-noarch:printing-4.0-amd64:printing-4.0-noarch<br/>
cat: /etc/lsb-release.d: Is a directory<br/>
CentOS release 6.4 (Final)<br/>
CentOS release 6.4 (Final)<br/>
cpe:/o:centos:linux:6:GA<br/>
[root@emmutl-po-7p ~]# uname -a<br/>
Linux emmutl-po-7p.sys.comcast.net 2.6.32-358.23.2.el6.x86_64 #1 SMP Wed Oct 16 18:37:12 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux<br/>
[root@emmutl-po-7p ~]#</p>

<p>[root@cmputl-ch2-4p ~]# cat /etc/&#42;release&#42;<br/>
CentOS release 6.3 (Final)<br/>
[root@cmputl-ch2-4p ~]# uname -a<br/>
Linux cmputl-ch2-4p.sys.comcast.net 2.6.32-279.22.1.el6.x86_64 #1 SMP Wed Feb 6 03:10:46 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux<br/>
[root@cmputl-ch2-4p ~]# date<br/>
Fri Nov  8 01:29:26 UTC 2013<br/>
[root@cmputl-ch2-4p ~]#</p>

<h3><a name="GitRepoSystemAdminGuide-ApplicationUsers"></a>Application Users</h3>

<p>In Comcast, users are considered application users when:</p>
<ul>
	<li>Access is granted only through ssh keys or sudo'ing from a valid Comcast userid.</li>
	<li>Passwords are not used and password aging is disabled.</li>
</ul>


<p>The following application users have been setup on cmputl-ch2-4p.sys.comcast.net:</p>
<ul>
	<li>git</li>
	<li>jenkins</li>
	<li>cmadmin</li>
	<li>apache</li>
</ul>


<p>The following application users has been setup on emmutl-po-7p.sys.comcast.net:</p>
<ul>
	<li>git</li>
	<li>apache</li>
</ul>


<p>cp /etc/passwd /etc/passwd-orig<br/>
cp /etc/group /etc/group-orig<br/>
useradd [userid]<br/>
cp /etc/group /etc/group-<br/>
cp /etc/passwd /etc/passwd-</p>

<p>Fix password aging for usernames git, jenkins, and cmadmin:<br/>
chage -M 99999 &lt;username&gt;</p>

<h3><a name="GitRepoSystemAdminGuide-NetworkDNSNames"></a>Network DNS Names</h3>

<p>DNS names where setup with the <a href="https://ipam.cable.comcast.com">IPAM DNS System</a>. Following is an example of an email you get from IPAM DNS after entering a request. You can use the links to see how to enter a request in this system. This example sets up emm-git2 on the Chicago VM system cmputl-ch2-4p.sys.comcast.net.  For any new DNS names you setup, add them to the appropriate device records in iTRC as aliases.</p>


<ul>
<b>From:</b> [CHQ -- IPAM-Requests]<br>
<b>Sent:</b> Friday, June 27, 2014 11:18 AM<br>
<b>To:</b> Wallace, Andrew<br>
<b>Subject:</b> Your request has been submitted: 172912<br>
<br>
emailDnsRequest<br> 
<br>
<table border>
<tr>
<td>Type:</td><td>dns_request</td>
</tr>
<tr>
<td>ID:</td><td>172912</td>
</tr>
<tr>
<td>Request Status:</td><td style="background-color:yellow;">Submitted</td>
</tr>
<tr>
<td>Requester:</td><td>Wallace, Andrew</td>
</tr>
<tr>
<td>Requester(Email):</td><td>andrew_wallace@cable.comcast.com</td>
</tr>
<tr>
<td>Requester(Phone):</td><td>(720) 267-2677/null</td>
</tr>
<tr>
<td>CR#:</td><td></td>
</tr>
<tr>	
<td>Assigned To:</td><td></td>
</tr>
<tr>	
<td>Queue:</td><td>DNS_TEAM_QUEUE CHQ--IPAM-Requests@cable.comcast.com </td>
</tr>
<tr>
<td>Notes:</td><td></td>
</tr>
</table>	
<br>
**Please note there is a 24 hour SLA. Once the ticket is processed, please allow 2-4 hours for propagation. <a href="https://ipam.cable.comcast.com/notify.do?dispatch=getDnsRequest&searchDnsRequest.id=fe7a1f97-a5ae-463b-901c-d436923128d7">Click here to edit request</a><br>
<a href="https://ipam.cable.comcast.com/notify.do?dispatch=getDnsRequestNoLogin&dnsRequest.id=fe7a1f97-a5ae-463b-901c-d436923128d7">Click here to view (Read Only) request</a>
</ul>


<p>You can use the <a href="https://itrc.io.comcast.net/">iTRC System</a> for cutting and pasting FQDN names.</p>

<h2><a name="GitRepoSystemAdminGuide-Applications"></a>Applications</h2>

<p>The following applications are listed in the order they were installed on this server. If you are setting up a new server for this Git Repo System, it is recommended you review this document in it's entirety before starting this task.</p>

<h3><a name="GitRepoSystemAdminGuide-AdministratorCommunication"></a>Administrator Communication</h3>

<p>For all administrators that may access the servers as "root" for this system, a README.txt file has been placed in the "root" userid home directory of each system server. This file is also maintained in the git repo CFX_EMM-GIT-System for each system server.</p>

<h3><a name="GitRepoSystemAdminGuide-Git"></a>Git</h3>

<p>The <a href="http://git-scm.com/">Git Fast Version Control</a> system is being setup on this system to replace The <a href="https://wiki.io.comcast.net/display/CEMP/Repository+System">CEMP CVS repository system</a>. It has been installed as follows:</p>

<p>To install Git for the EM&amp;M repository system, the following libraries that Git depends on need to be installed: curl,<br/>
zlib, openssl, expat, and libiconv.</p>

<p>[root@cmputl-ch2-4p ~]# yum install curl-devel expat-devel gettext-devel \<br/>
&gt; openssl-devel zlib-devel<br/>
...<br/>
Complete!</p>

<h4><a name="GitRepoSystemAdminGuide-CompileandInstall"></a>Compile and Install</h4>

<p><b>Notes:</b></p>
<ul>
	<li>EPEL Does not work in this environment</li>
	<li>Do Compile and Install as root</li>
</ul>


<p>download the latest git tar.gz from <a href="https://code.google.com/p/git-core/downloads/list">&#104;ttps://code.google.com/p/git-core/downloads/list</a> to /root/downloads<br/>
<b>Note:</b> git-1.9.0.tar.gz was downloaded and added to the CFX_EMM-GIT-System git repo.</p>

<p>Verify SHA1 checksum with all git downloads, here an example:<br/>
[root@cmputl-ch2-4p tmp]# sha1sum git-1.9.0.tar.gz<br/>
e60667fc16e5a5f1cde46616b0458cc802707743  git-1.9.0.tar.gz<br/>
[root@cmputl-ch2-4p tmp]#</p>

<p>[root@cmputl-ch2-4p downloads]# tar -zxf git-1.9.0.tar.gz<br/>
[root@cmputl-ch2-4p downloads]# cd git-1.9.0<br/>
[root@cmputl-ch2-4p downloads]# make prefix=/usr/local all<br/>
  {Compile output ....}<br/>
[root@cmputl-ch2-4p git-1.9.0]# make prefix=/usr/local install<br/>
  {Install output ....}<br/>
[root@cmputl-ch2-4p git-1.9.0]#</p>

<h4><a name="GitRepoSystemAdminGuide-InstallManPages"></a>Install Man Pages</h4>

<p>download the latest git-manpages tar.gz from <a href="https://code.google.com/p/git-core/downloads/list">&#104;ttps://code.google.com/p/git-core/downloads/list</a> to /root/downloads<br/>
<b>Note:</b> git-manpages-1.9.0.tar.gz was downloaded and added to the CFX_EMM-GIT-System git repo.</p>

<p>[root@emmutl-po-7p downloads]# sha1sum git-manpages-1.9.0.tar.gz <br/>
cff590c92b4d1c8a143c078473140b653cc5d56a  git-manpages-1.9.0.tar.gz<br/>
[root@emmutl-po-7p downloads]#<br/>
[root@cmputl-ch2-4p git-1.9.0]# cd /usr/local/share/man<br/>
[root@cmputl-ch2-4p man]# tar -zxvf /root/downloads/git-manpages-1.9.0.tar.gz</p>

<h4><a name="GitRepoSystemAdminGuide-Verify"></a>Verify</h4>

<p>[root@cmputl-ch2-4p ~]# git --version<br/>
[root@cmputl-ch2-4p ~]# man git</p>
<ul>
	<li><b>NOTE:</b> Also verified that "yum update" did not change the git install from git version 1.9.0.</li>
</ul>


<h4><a name="GitRepoSystemAdminGuide-GitUpgradeProcedure"></a>Git Upgrade Procedure</h4>

<p>As root, follow instructions for Compile and Install, and Install Man Pages.<br/>
Save the previous revision in /root/downloads.</p>

<p>yum update curl-devel expat-devel gettext-devel openssl-devel zlib-devel<br/>
(or more generally "yum update")<br/>
download git-[release number].tar.gz from <a href="https://code.google.com/p/git-core/downloads/list">&#104;ttps://code.google.com/p/git-core/downloads/list</a> to git repo CFX_EMM-GIT-System.</p>

<p>Verify SHA1 checksum with all git downloads, here an example:<br/>
[root@cmputl-ch2-4p tmp]# sha1sum git-[release number].tar.gz<br/>
e60667fc16e5a5f1cde46616b0458cc802707743  git-1.9.0.tar.gz<br/>
[root@cmputl-ch2-4p tmp]#</p>

<p>Upload git-[release number].tar.gz from git repo CFX_EMM-GIT-System to upgrade server. (/root/upload maybe)<br/>
tar &#45;zxf git-[release number].tar.gz<br/>
cd git-[release number]<br/>
make prefix=/usr/local all<br/>
make prefix=/usr/local install<br/>
cd /usr/local/share/man<br/>
tar &#45;zxvf /root/downloads/git-manpages-[release number].tar.gz </p>

<h3><a name="GitRepoSystemAdminGuide-Apache"></a>Apache</h3>

<p>Used to support read access to git repositories via the httpd daemon on this server. Also support git documentation.</p>

<h4><a name="GitRepoSystemAdminGuide-Installhttpd"></a>Install httpd</h4>

<p>[awalla5075k@cmputl-ch2-4p ~]$ sudo yum install httpd</p>

<h4><a name="GitRepoSystemAdminGuide-ConfigureApache"></a>Configure Apache</h4>

<ul>
	<li>Set the apache service to start on boot:</li>
</ul>


<p>[awalla5075k@cmputl-ch2-4p ~]$ sudo chkconfig --levels 235 httpd on</p>

<ul>
	<li>Enable name-based virtual hosting on port 80:</li>
</ul>


<p>[awalla5075k@cmputl-ch2-4p ~]$ cd /etc/httpd/conf<br/>
[awalla5075k@cmputl-ch2-4p conf]$ sudo cp httpd.conf httpd.conf-orig</p>

<ul>
	<li>Open the httpd configuration file located at /etc/httpd/conf/httpd.conf</li>
	<li>Un-comment the line containing the text NameVirtualHost *:80</li>
	<li>Save the file</li>
</ul>


<h4><a name="GitRepoSystemAdminGuide-ConfigureVirtualHosts"></a>Configure Virtual Hosts</h4>

<p>Reference Virtualhost instructions at <a href="http://dev.antoinesolutions.com/apache-server/">&#104;ttp://dev.antoinesolutions.com/apache-server/</a>.</p>

<ul>
	<li>Prepare CFX_EMM-GIT-System/git1,2-server/repository.conf for new server</li>
</ul>


<p>[root@server] cd /etc/httpd/conf.d<br/>
[root@server] cp CFX_EMM-GIT-System/git1,2-server/repository.conf .</p>

<ul>
	<li>Setup the Virtual host directory:<br/>
[root@server]# cd /app<br/>
[root@server]# mkdir git-repos<br/>
[root@server]# chown git:git git-repos<br/>
<b>Note:</b> cmputl-ch2-4p was setup with /db/msql rather the /app. Using /app on new VMs moving forward.</li>
</ul>


<h4><a name="GitRepoSystemAdminGuide-ConfigureandInstallIndexPages"></a>Configure and Install Index Pages</h4>

<ul>
	<li>Prepare CFX_EMM-GIT-System/git1,2-server/noindex.html file
	<ul>
		<li>Diff with /var/www/error/noindex.html on new server, account for diffs.</li>
	</ul>
	</li>
</ul>


<p>[root@server]# cd /var/www/error<br/>
[root@server]# cp noindex.html noindex.html-orig<br/>
[root@server]# cp CFX_EMM-GIT-System/git1,2-server/noindex.html .</p>

<ul>
	<li>Prepare CFX_EMM-GIT-System/git1,2-server/index.html file</li>
</ul>


<p>[root@server]# cd /var/www/index<br/>
[root@server]# cp CFX_EMM-GIT-System/git1,2-server/index.html .</p>

<ul>
	<li>Copy Git logo files to each EMM git1,2 server</li>
</ul>


<p>[root@server]# cd /var/www/icons<br/>
[root@server]# cp CFX_EMM-GIT-System/git-logo.png .<br/>
[root@server]# cp CFX_EMM-GIT-System/gitweb-logo.png .</p>

<h5><a name="GitRepoSystemAdminGuide-RestartApacheandTest"></a>Restart Apache and Test</h5>

<p>[awalla5075k@server]$ sudo service httpd restart</p>

<ol>
	<li>Verify "http://emm-git1.sys.comcast.net" or "http://emm-git2.sys.comcast.net" in browser accordingly.</li>
	<li>rename /var/www/html/index.html hold.html</li>
	<li>Verify noindex.html error condition</li>
	<li>rename /var/www/html/hold.html index.html</li>
	<li>Verify "http://emm-git1.sys.comcast.net" or "http://emm-git2.sys.comcast.net" in browser accordingly.</li>
</ol>


<h3><a name="GitRepoSystemAdminGuide-Gotolite"></a>Gotolite</h3>

<p>Application for managing ssh keys and general repository access. Reference <a href="http://git-scm.com/book/en/Git-on-the-Server-Gitolite">section 4.8</a> of the <a href="http://git-scm.com/doc">Git Documentation</a>.</p>

<h4><a name="GitRepoSystemAdminGuide-PreInstall"></a>Pre-Install</h4>

<ol>
	<li>Read through all steps in this section before actually doing the install.</li>
	<li>Instructions referenced for this initial install at <a href="http://gitolite.com/gitolite/qi.html">&#104;ttp://gitolite.com/gitolite/qi.html</a>.</li>
	<li>Adhere to <a href="http://gitolite.com/gitolite/WARNINGS.html">&#104;ttp://gitolite.com/gitolite/WARNINGS.html</a>.</li>
	<li>Since this system has both "Primary" and "Fail-Over" servers, be familiar with <a href="http://gitolite.com/gitolite/rare.html#moving">Moving Servers</a> content (including links).</li>
	<li>Download gitolite-master.zip from <a href="https://github.com/sitaramc/gitolite">&#104;ttps://github.com/sitaramc/gitolite</a> to Git repo CFX_EMM-Git-System.</li>
	<li>Upload gitolite-master.zip to server:/tmp. Git user will copy from there.
	<ol>
		<li>NOTE: Since we can't execute  "git clone git://github.com/sitaramc/gitolite" as indicated in ~/gitolite/README.txt file, The previous steps were done.</li>
	</ol>
	</li>
	<li>Logon to server and sudo to git.</li>
	<li>Follow instructions for "Installation and Setup" in ~/gitolite/README.txt.
	<ol>
		<li>Note: While executing, gitolite/install -ln, got message "git describe failed; cannot deduce version number". To correct, see "Fix Gitolite version indicator" section below.</li>
	</ol>
	</li>
	<li>Go back to <a href="http://gitolite.com/gitolite/rare.html#moving">Moving Servers</a> and make sure the "Primary" and "Fail-Over" servers are setup correctly.</li>
</ol>


<h4><a name="GitRepoSystemAdminGuide-Install"></a>Install</h4>

<ul>
	<li><b>On windows workstation:</b></li>
</ul>
<ol>
	<li>Download zip from <a href="https://github.com/sitaramc/gitolite">&#104;ttps://github.com/sitaramc/gitolite</a> after setting site for desired release. (started with master)
	<ol>
		<li>This was done by selecting branch under blue bar and identifying Master branch</li>
	</ol>
	</li>
	<li>Copy gitolite-master.zip to git repo CFX_EMM-GIT-System
	<ol>
		<li>Keeps actual files used available for future reference.</li>
	</ol>
	</li>
	<li>cp gitolite-master.zip to [server:/tmp]</li>
	<li>cp awalla5075.pub to [server:/tmp]</li>
</ol>


<ul>
	<li><b>On server logged on as git:</b><br/>
[git@server]$ pwd<br/>
/home/git<br/>
[git@server]$ mkdir bin<br/>
[git@server]$ cp /tmp/awalla5075k.pub .<br/>
[git@server]$ cp /tmp/gitolite-master.zip .<br/>
[git@server]$ unzip gitolite-master.zip<br/>
[git@server]$ rm gitolite-master.zip<br/>
[git@server]$ cd gitolite-master<br/>
[git@server]$ ./install -to $HOME/bin<br/>
[git@server]$ gitolite setup -pk awalla5075k.pub<br/>
Initialized empty Git repository in /home/git/repositories/gitolite-admin.git/<br/>
Initialized empty Git repository in /home/git/repositories/testing.git/<br/>
WARNING: /home/git/.ssh missing; creating a new one<br/>
    (this is normal on a brand new install)<br/>
WARNING: /home/git/.ssh/authorized_keys missing; creating a new one<br/>
    (this is normal on a brand new install)</li>
</ul>


<ul>
	<li><b>In /home/git, mv contents of repositories to /app/git-repos. Create softlink repositories -&gt; /app/git-repos</b></li>
	<li><b>Need to sudo chown git:git /app/git-repos</b><br/>
[git@server]$ cd repositories<br/>
[git@server]$ mv * /app/git-repos<br/>
[git@server]$ ln -s /app/git-repos repositories</li>
</ul>


<ul>
	<li><b>On your workstation:</b><br/>
&#35; clone the admin repo so you can start adding stuff<br/>
git clone git@emm-git1.sys.comcast.net:gitolite-admin.git<br/>
&#35; Note 1: clone path must not include "repositories/"<br/>
&#35; Note 2: it may include the ".git" at the end but it is optional</li>
</ul>


<ul>
	<li>While testing:<br/>
Found that the wrong information is in ~/.ssh/known_hosts file. Referencing <a href="http://gitolite.com/gitolite/sts.html#ssh-ha">Appendix 4: ssh host aliases</a>:</li>
	<li>Created file ~/.ssh/config with the following: (This has been saved to repo CFX-EMM-GITSystem)</li>
</ul>


<p>host gitolite<br/>
    user git<br/>
    hostname emm-git1.sys.comcast.net<br/>
    port 22<br/>
    identityfile ~/.ssh/id_rsa</p>

<ul>
	<li>Ran and got the following:</li>
</ul>


<p>[git@emmutl-po-7p .ssh]$ ssh gitolite<br/>
The authenticity of host 'emm-git1.sys.comcast.net (172.28.98.231)' can't be established.<br/>
RSA key fingerprint is 21:2e:ff:47:0e:36:d2:b1:70:14:13:86:82:a5:da:4b.<br/>
Are you sure you want to continue connecting (yes/no)? yes<br/>
Warning: Permanently added 'emm-git1.sys.comcast.net,172.28.98.231' (RSA) to the list of known hosts.<br/>
WARNING: This system is solely for the use of authorized Comcast employees and contractors.<br/>
Password: </p>

<p>[git@emmutl-po-7p .ssh]$ </p>

<h4><a name="GitRepoSystemAdminGuide-Adjustthesystemlogonbanner"></a>Adjust the system logon banner</h4>

<p>Since gitolite controlled ssh sessions are the only access allowed, the following was done:<br/>
[root@server]# pwd<br/>
/etc<br/>
[root@server]# cp issue issue-orig<br/>
[root@server]# cp issue.net issue.net-orig</p>
<ul>
	<li>copy issue and issue.net from appropriate server directory in git repo CFX-EMM-GIT-System to server:/etc</li>
</ul>


<h4><a name="GitRepoSystemAdminGuide-GitoliteNewSystemandRestoreNotes"></a>Gitolite New System and Restore Notes</h4>

<ul>
	<li>Upgrades, system changes, and fixes are tested on the fail-over system first (emm-git2); then scheduled for the primary system (emm-git1).</li>
</ul>


<h5><a name="GitRepoSystemAdminGuide-SystemRestore"></a>System Restore</h5>

<p>After a new system has been setup, following all install related instructions in this guide to this point, one of the following procedures applies:</p>

<h6><a name="GitRepoSystemAdminGuide-NewPrimarySystem%28emmgit1%29"></a>New Primary System (emm-git1)</h6>

<p>On the new server as git:</p>
<ol>
	<li>Copy all repositories from active EM&amp;M Git System server to this new server's repository directory (/app/git-repos).
	<ol>
		<li>Note: Left the new repos gitolite-admin.git and testing.git alone. Copied all others over:
		<ol>
			<li>cfx-branch.git</li>
			<li>cfx-emm-cm.git</li>
			<li>CFX-MANILLA.git</li>
			<li>DATA-XfinityWifi.git</li>
			<li>foo.git</li>
		</ol>
		</li>
	</ol>
	</li>
	<li>Shut off "git push" on "fail-over" server. Run gitolite writable -h for more info.<br/>
[git@server]$  gitolite writable @all off Git push disabled, fail-over server.</li>
	<li>Copy the $HOME/.gitolite.rc file from the old server, overwriting the one on the new primary server.</li>
	<li>Run gitolite setup.</li>
	<li>Initialize backup functionality on this new server and restore functionality on current fail-over server. <b><font color="red">Not yet done until testing of new system occurs.</font></b></li>
</ol>


<p>On your workstation, in the git rep gitolite-admin:</p>
<ol>
	<li>Initialize the gitolite.conf file with the currently active EMM Git System. This will ensure the new primary server is in sync with the access policies established and documented in the EMM Git User Guide:
	<ol>
		<li>copy gitolite.conf to gitolite.conf-orig</li>
		<li>overwrite gitolite.conf with currently active gitolite.conf</li>
	</ol>
	</li>
	<li>Initialize the gitolite-admin repo's key directory with the currently active EMM Git System. This will ensure the correct set of user keys for the currently active EMM Git System. <b>Be Careful with the initial admin key for the new gitolite-admin repo</b>.
	<ol>
		<li>copy ??/gitolite-admin/keydir/*.pub .</li>
	</ol>
	</li>
	<li>Check in changes to new gitolite-admin repo and push to new server.</li>
	<li>Verify new Gitolite setup is functioning correctly by running the following:
	<ol>
		<li>ssh git@emm-git1.sys.comcast.net info lc</li>
	</ol>
	</li>
</ol>


<h6><a name="GitRepoSystemAdminGuide-NewFailOverSystem%28emmgit2%29"></a>New Fail-Over System (emm-git2)</h6>

<p><b><font color="red">Need text here.</font></b></p>

<h4><a name="GitRepoSystemAdminGuide-UpgradingGitolite"></a>Upgrading Gitolite</h4>

<p>This section based on <a href="http://gitolite.com/gitolite/install.html#upgrading">Gitolite Upgrading</a> documentation. Update version number in this section when it is exercised. This indicates the current version installed in the EMM Git System.</p>

<p><b>This needs to be done on both EMM Git System servers starting with <font color="red">fail-over</font> server for testing purposes.</b></p>

<p>Review Gitolite documentation that may be specific to the Gitolite release you are upgrading from to the release you are upgrading to.</p>

<ol>
	<li>Download zip from <a href="https://github.com/sitaramc/gitolite">&#104;ttps://github.com/sitaramc/gitolite</a> after setting site for desired release. (v3.6.1 currently)
	<ol>
		<li>This was done by selecting tag under blue bar and identifying v3.6.1 tag</li>
	</ol>
	</li>
	<li>Copy gitolite-3.6.1.zip to git repo CFX-EMM-GITSystem
	<ol>
		<li>Keeps actual files used available for future reference.</li>
		<li>After successful install and test, remove current gitolite-[release].zip from CFX_EMM-GITSystem</li>
	</ol>
	</li>
	<li>cp gitolite-3.6.1.zip to [server:/tmp]</li>
	<li>cp awalla5075.pub to [server:/tmp]</li>
</ol>


<ul>
	<li>Update your clone of the gitolite source.<br/>
<b>On server logged on as git:</b><br/>
[git@server]$ pwd<br/>
/home/git<br/>
[git@server]$ cp /tmp/awalla5075k.pub .  (This should be the original admin key.)<br/>
[git@server]$ cp /tmp/gitolite-3.6.1.zip .<br/>
[git@server]$ unzip gitolite-3.6.1.zip<br/>
[git@server]$ rm gitolite-3.6.1.zip<br/>
[git@server]$ rm -fr gitolite-master<br/>
[git@server]$ cd gitolite-3.6.1</li>
</ul>


<ul>
	<li>Repeat the install command you used earlier (make sure you use the same arguments as before).<br/>
[git@server]$ ./install -to $HOME/bin<br/>
git describe failed; cannot deduce version number<br/>
[git@server]$<br/>
(Due to previous note, updated ~HOME/bin/VERSION with (v3.6.1))</li>
</ul>


<ul>
	<li>Run gitolite setup.<br/>
[git@server]$ gitolite setup</li>
</ul>


<h4><a name="GitRepoSystemAdminGuide-GitoliteAdmininstration"></a><a href="http://gitolite.com/gitolite/admin.html">Gitolite Admininstration</a></h4>

<p>Link used for administrating Gitolite reference.</p>

<p>h4 <b><font color="red">To this point-Users getting password prompt.</font></b></p>

<p>Did an upgrade from master branch to v3.6.1 tag.  Now testing...</p>

<h3><a name="GitRepoSystemAdminGuide-GitWeb"></a>GitWeb</h3>

<p>As root:</p>

<p>[root@cmputl-ch2-4p git]# pwd<br/>
/opt/git<br/>
[root@cmputl-ch2-4p git]# yum install gitweb<br/>
...<br/>
[root@cmputl-ch2-4p git]#</p>

<p>Update /etc/gitweb.conf as follows:<br/>
[root@server]$ cp gitweb.conf gitweb.conf-orig</p>
<ul>
	<li>For emm-git1 set "our $projectroot =/app/git-repos";</li>
	<li>For emm-git2 set "our $projectroot = "/db/mysql/git-repo";</li>
</ul>


<p>[root@cmputl-ch2-4p git]# service httpd restart</p>

<h4><a name="GitRepoSystemAdminGuide-GitWebMaintenance"></a>GitWeb Maintenance</h4>

<p>GitWeb is configured from /etc/gitweb.conf. By default, the GitWeb view is controlled by file /home/git/projects.list. by adjusting /etc/gitweb.conf, (comment out $projects_list variable), the $projectroot variable setting (and file permissions) will dictate what is view-able by gitweb.</p>

<p>By default, the temporary repos created by analysts are not view-able from gitweb. Since each individual analyst can use "ssh git@emm-git info" to see what repos they have access to, it was determined the temporary repos do not need to be view-able from gitweb.</p>

<p>Initial DevLead repos are treated like temporary repos until they are moved to the permanent repository location and updated for GitWeb usage.<br/>
<b><font color="red">Currently documented this procedure in a gitolite.conf preamble while it is being tested. Once testing completed, both this doc and user guide will need to be updated accordingly.</font></b> </p>

<p>Note that further documentation on gitweb is available at directory /usr/share/doc/gitweb-1.7.1 of the cmputl-ch2-4p.sys.comcast.net server.</p>

<h3><a name="GitRepoSystemAdminGuide-GitoliteAdminUpdatesPerformed"></a>Gitolite Admin Updates Performed</h3>

<h4><a name="GitRepoSystemAdminGuide-Tosetupprojectorreponameforhttpreadaccess%3A"></a>To setup project or repo-name for http read access:</h4>
<p>$ cd project.git<br/>
$ mv hooks/post-update.sample hooks/post-update<br/>
$ chmod a+x hooks/post-update<br/>
$ ./post-update</p>

<h4><a name="GitRepoSystemAdminGuide-FixGitoliteversionindicator"></a>Fix Gitolite version indicator</h4>

<ul>
	<li>Logon to server as git</li>
</ul>


<p>[git@server]$ cd bin<br/>
[git@server]$ ls -l<br/>
total 40<br/>
drwxrwxr-x 2 git git 4096 Jan 14 15:16 commands<br/>
-rwxr-xr-x 1 git git 3083 Jan 14 15:16 gitolite<br/>
-rwxr-xr-x 1 git git 8363 Jan 14 15:16 gitolite-shell<br/>
drwxrwxr-x 3 git git 4096 Jan 14 15:16 lib<br/>
drwxrwxr-x 2 git git 4096 Jan 14 15:16 syntactic-sugar<br/>
drwxrwxr-x 3 git git 4096 Jan 14 15:16 triggers<br/>
<del>rw-rw-r</del>- 1 git git    9 Jan 20 19:45 VERSION<br/>
drwxrwxr-x 2 git git 4096 Jan 14 15:16 VREF<br/>
[git@cmputl-ch2-4p src]$ vi VERSION<br/>
(v3.x)<br/>
`<br/>
`<br/>
"VERSION" 1L, 7C written                                                                          <br/>
[git@server]$</p>

<h4><a name="GitRepoSystemAdminGuide-AddDescriptionforgitoliteadminrepo%3A"></a>Add Description for gitolite-admin repo:</h4>
<p>awalla5075k@CO183LCETENG08 ~/git-server-admin/gitolite-admin (master)<br/>
$ ssh git@emm-git info -lc -ld<br/>
hello awalla5075k, this is git@cmputl-ch2-4p running gitolite3 (v3.x) on git 1.8.4.4</p>

<p> R W    cfx_emm_cm              Cross Functional EMM Configuration Management<br/>
 R W    foo<br/>
 R W    gitolite-admin          Unnamed repository; edit this file 'description' to name the reposit<br/>
 R W    testing</p>

<p>awalla5075k@CO183LCETENG08 ~/git-server-admin/gitolite-admin (master)<br/>
$ ssh git@emm-git desc gitolite-admin "Git repo used to administer the repos on the emm-git server."</p>

<p>awalla5075k@CO183LCETENG08 ~/git-server-admin/gitolite-admin (master)<br/>
$ ssh git@emm-git info -lc -ld<br/>
hello awalla5075k, this is git@cmputl-ch2-4p running gitolite3 (v3.x) on git 1.8.4.4</p>

<p> R W    cfx_emm_cm              Cross Functional EMM Configuration Management<br/>
 R W    foo<br/>
 R W    gitolite-admin          Git repo used to administer the repos on the emm-git server.<br/>
 R W    testing</p>

<p>awalla5075k@CO183LCETENG08 ~/git-server-admin/gitolite-admin (master)<br/>
$</p>

<h4><a name="GitRepoSystemAdminGuide-RenamingaGitoliterepo"></a>Renaming a Gitolite repo</h4>

<p>There's no code to do this in <a href="http://gitolite.com/gitolite/repos.html">gitolite</a>. What you do is:</p>

<p>log on to the EM&amp;M Git server directly, cd $REPO_BASE (default: cd ~/repositories), and</p>

<p>mv old-name.git new-name.git</p>

<p>back on your gitolite-admin clone, edit conf/gitolite.conf and replace all occurrences of old-name with new-name. Then add, commit, and push as usual.</p>

<p>The order of these 2 steps is important; do not reverse them <img class="emoticon" src="/images/icons/emoticons/smile.gif" height="20" width="20" align="absmiddle" alt="" border="0"/></p>

<h3><a name="GitRepoSystemAdminGuide-AdminTasks"></a>Admin Tasks</h3>

<h4><a name="GitRepoSystemAdminGuide-Backups"></a>Backups</h4>

<p>Still researching.</p>
<ul>
	<li><a href="http://sethrobertson.github.io/GitBestPractices/">Commit Often, Perfect Later, Publish Once: Git Best Practices</a></li>
	<li>rsync</li>
	<li><a href="https://github.com/meitar/git-archive-all.sh/blob/master/git-archive-all.sh">git-archive-all.sh</a></li>
	<li><a href="http://git-scm.com/docs/git-bundle.html">Git Bundle</a></li>
</ul>


<h4><a name="GitRepoSystemAdminGuide-Turnoffwelcome.confin%2Fetc%2Fhttpd%2Fconf.d"></a>Turn off welcome.conf in /etc/httpd/conf.d</h4>

<p>[root@cmputl-ch2-4p conf.d]# pwd<br/>
/etc/httpd/conf.d<br/>
[root@cmputl-ch2-4p conf.d]# diff welcome.conf-orig welcome.conf<br/>
7,10c7,10<br/>
&lt; &lt;LocationMatch "^/+$"&gt;<br/>
&lt;     Options -Indexes<br/>
&lt;     ErrorDocument 403 /error/noindex.html<br/>
&lt; &lt;/LocationMatch&gt;<br/>
&#8212;<br/>
&gt; #&lt;LocationMatch "^/+$"&gt;<br/>
&gt; #    Options -Indexes<br/>
&gt; #    ErrorDocument 403 /error/noindex.html<br/>
&gt; #&lt;/LocationMatch&gt;<br/>
[root@cmputl-ch2-4p conf.d]#</p>


<p>[root@cmputl-ch2-4p conf.d]# service httpd restart<br/>
Stopping httpd:                                            [  OK  ]<br/>
Starting httpd:                                            [  OK  ]<br/>
[root@cmputl-ch2-4p conf.d]# </p>

<h4><a name="GitRepoSystemAdminGuide-VerifyApachesyntax%3A"></a>Verify Apache syntax:</h4>

<p>[root@cmputl-ch2-4p conf.d]# /usr/sbin/httpd -S<br/>
VirtualHost configuration:<br/>
wildcard NameVirtualHosts and <em>default</em> servers:<br/>
*:80                   is a NameVirtualHost<br/>
         default server www.repository (/etc/httpd/conf.d/repository.conf:2)<br/>
         port 80 namevhost www.repository (/etc/httpd/conf.d/repository.conf:2)<br/>
                 alias repository<br/>
Syntax OK<br/>
[root@cmputl-ch2-4p conf.d]#</p>

<h4><a name="GitRepoSystemAdminGuide-Testwithsampleindex.htmlfilein%2Fopt%2Fgit."></a>Test with sample index.html file in /opt/git.</h4>

<p>[root@cmputl-ch2-4p git]# pwd<br/>
/opt/git<br/>
[root@cmputl-ch2-4p git]# cat index.html<br/>
&lt;!DOCTYPE html&gt;<br/>
&lt;html&gt;<br/>
&lt;body&gt;</p>

<p>&lt;h1&gt;My First Heading&lt;/h1&gt;</p>

<p>&lt;p&gt;My first paragraph.&lt;/p&gt;</p>

<p>&lt;/body&gt;<br/>
&lt;/html&gt;</p>

<p>[root@cmputl-ch2-4p git]#</p>

<h3><a name="GitRepoSystemAdminGuide-ErrorsEncountered"></a>Errors Encountered</h3>

<p>Errors that have been encountered during setup/testing activites are documented here for future support issues.</p>

<h4><a name="GitRepoSystemAdminGuide-Thesshkeyisworkingbutunabletoclonerepo"></a>The ssh key is working but unable to clone repo</h4>

<p><b>If the following error is encountered:</b><br/>
fatal: Could not read from remote repository.</p>

<p>Please make sure you have the correct access rights<br/>
and the repository exists.</p>

<p><b>Check to see if the analyst's workstation has a variable GIT_SSH that is set to plink.exe.  If it is reset it to null.</b><br/>
After setting to null open another git console and enter: echo $GIT_SSH.<br/>
If the GIT_SSH variable issue re-appears the GIT_SSH variable is probably a windows registry variable must be removed or you will not be able to checkout/clone.<br/>
To remove it permanently open a windows console and enter the following:<br/>
   REG delete HKCU\Environment /F /V GIT_SSH<br/>
Now reboot and the variable should disappear.</p>

<h4><a name="GitRepoSystemAdminGuide-GitWebprojects.listNotWorkingCorrectly"></a>GitWeb projects.list Not Working Correctly</h4>

<p><b>If the following errors are encountered:</b> (Font color of error lines changed to red.)<br/>
awalla5075k@CO183LCETENG08 ~/git-server-admin/gitolite-admin/conf (master)<br/>
$ git push<br/>
Counting objects: 7, done.<br/>
Delta compression using up to 4 threads.<br/>
Compressing objects: 100% (3/3), done.<br/>
Writing objects: 100% (4/4), 501 bytes | 0 bytes/s, done.<br/>
Total 4 (delta 1), reused 0 (delta 0)<br/>
<b><font color="red">remote: FATAL: git config 'gitweb.owner' not allowed<br/>
remote: check GIT_CONFIG_KEYS in the rc file</font></b><br/>
To git@cemp-git:gitolite-admin<br/>
   d44ba8d..cf6c002  master -&gt; master</p>

<p>awalla5075k@CO183LCETENG08 ~/git-server-admin/gitolite-admin/conf (master)<br/>
$</p>

<p><b>Make sure your .gitolite.rc contains:</b>  (logon to emm-git and sudo to git)</p>

<p>    GIT_CONFIG_KEYS                 =&gt;  '.*',<br/>
    GITWEB_PROJECTS_LIST            =&gt; '/home/git/projects.list',</p>

<h3><a name="GitRepoSystemAdminGuide-Inordertoclone%2Cthesyntaxisasfollows%3A"></a>In order to clone, the syntax is as follows:</h3>
<p>git clone ssh://git@emm-git/cfx_emm_cm<br/>
git clone ssh://git@emm-git/foo<br/>
git clone ssh://git@emm-git/testing</p>



<h3><a name="GitRepoSystemAdminGuide-InstallpythonSetupTools"></a>Install python Setup Tools</h3>

<p>This was done is support of installing Gitosis testing on cmputl-ch2-4p. Decided to go with Gitolite to better support GitFlow. Left the Python tools on chputl-ch2-4p. Currently not install on emmutl-po-7p.</p>

<p>$  install python-setuptools</p>

<p>[root@cmputl-ch2-4p ~]# yum install python-setuptools</p>

<p>...</p>

<p>[root@cmputl-ch2-4p ~]#</p>

<h5><a name="GitRepoSystemAdminGuide-Apacheservice%3A"></a>Apache service:</h5>

<p>[root@cmputl-ch2-4p git]# service httpd [restart|stop|start]</p>

<h3><a name="GitRepoSystemAdminGuide-BranchingModel"></a>Branching Model</h3>

<p>The branch module followed for successful branching and merging tasks is based on <a href="http://nvie.com/posts/a-successful-git-branching-model/">A Successful Git Branching Model by Vincent Driessen</a>. The complete approach followed is drafted at <span class="error">&#91;EM&amp;M Branching Model|&#93;</span>. It is also referenced from the <a href="https://wiki.io.comcast.net/pages/viewpage.action?pageId=227392710">EM&amp;M Git Users Guide</a>.</p>

<h2><a name="GitRepoSystemAdminGuide-UsefulLinks"></a>Useful Links</h2>

<p><a href="http://www.geekgumbo.com/2011/10/24/gitolite-troubleshooting-checklist-part-4/">Gitolite Troubleshooting Checklist</a><br/>
<a href="http://gitolite.com/gitolite/emergencies.html">Gitolite Emergencies</a><br/>
<a href="http://gitolite.com/gitolite/index.html#contact">Hosting Git Repositories</a><br/>
<a href="http://en.wikipedia.org/wiki/Git_(software)">Git Software</a><br/>
<a href="http://en.wikipedia.org/wiki/File:Git_operations.svg">Git Operations</a><br/>
<a href="http://jan-krueger.net/wordpress/wp-content/uploads/2007/09/git-cheat-sheet.pdf">Git Cheat Sheet</a> by Jan Krueger.<br/>
<a href="http://www.cheat-sheets.org/saved-copy/git-cheat-sheet.pdf">Git Cheat Sheet</a> by Zack Rusin.<br/>
<a href="http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/">Regular Expressions</a><br/>
<a href="http://www.cheatography.com/davechild/cheat-sheets/linux-command-line/">Linux Command Line</a><br/>
<a href="http://www.cheatography.com/davechild/cheat-sheets/wikipedia/">Wikipedia</a><br/>
<a href="http://www.cheatography.com/davechild/cheat-sheets/html-character-entities/">HTML Character Entities</a></p>

<h3><a name="GitRepoSystemAdminGuide-SupportingDocuments"></a>Supporting Documents</h3>


    

<div class="plugin_attachments_container">
    <div class="plugin_attachments_table_container">
        <fieldset class="hidden">
            <input type="hidden" class="plugin_attachments_macro_render_param" name="pageId" value="162731027">
            <input type="hidden" name="deleteConfirmMessage" value="Are you sure you want to remove the attached file {0}?"/>
            <input type="hidden" name="i18n-notpermitted" value="You are not permitted to perform this operation.">
                                                 <input type="hidden" class="plugin_attachments_macro_render_param" name="upload" value="true">
                                                                    <input type="hidden" name="outputType" value="word">
        </fieldset>
                    <fieldset class="hidden parameters">
    <input type="hidden" id="removeAttachmentWarning" value="Are you sure you want to remove the attached file {0}?">
</fieldset>

<table class="tableview attachments">
    <tr>
                <th class="filename-column">            <a href="/display/CEMP/Git+Repo+System+Admin+Guide?sortBy=name">Name</a>
    </th>
        <th>            <a href="/display/CEMP/Git+Repo+System+Admin+Guide?sortBy=size">Size</a>
    </th>
        <th>Creator</th>
        <th>            <a href="/display/CEMP/Git+Repo+System+Admin+Guide?sortBy=createddate">Creation Date</a>
    </th>
        <th class="comment">Comment</th>
                    <th>&nbsp;</th>
            </tr>

    
    
                
        
                <tr id="attachment-238782463">
                                <td class="filename-column">
                
<span class="icon icon-file-image" title=PNG File>PNG File</span>                <a class="filename" href="/download/attachments/162731027/SC-VMsetup.PNG"
                   title="SC-VMsetup.PNG"
                   data-filename="SC-VMsetup.PNG">
                    SC-VMsetup.PNG
                </a>
            </td>
            <td>67 kB</td>
            <td><a href="/display/~awalla5075k"
                          class="url fn confluence-userlink" data-username="awalla5075k"
                   >Andrew Wallace</a></td>
            <td>Jun 27, 2014 11:37</td>
            <td class="comment">
                                    &nbsp;
                            </td>
                        <td class="attachment-actions">
                                                <ul>
                                            <li class="first">
    
        
    
    <a  href="/pages/editattachment.action?pageId=$page.id&amp;fileName=SC-VMsetup.PNG"  class="editAttachmentLink"   title="">
                   <span>Properties</span></a>        </li>
                                            <li class="">
    
        
    
    <a  href="/pages/removeattachment.action?pageId=$page.id&amp;fileName=SC-VMsetup.PNG&amp;version=1"  class="removeAttachmentLink"   title="">
                   <span>Remove</span></a>        </li>
                                    </ul>
                            </td>
                    </tr>

            
                
        
                <tr id="attachment-238782465">
                                <td class="filename-column">
                
<span class="icon icon-file-image" title=PNG File>PNG File</span>                <a class="filename" href="/download/attachments/162731027/SC-addnewVM.PNG"
                   title="SC-addnewVM.PNG"
                   data-filename="SC-addnewVM.PNG">
                    SC-addnewVM.PNG
                </a>
            </td>
            <td>62 kB</td>
            <td><a href="/display/~awalla5075k"
                          class="url fn confluence-userlink" data-username="awalla5075k"
                   >Andrew Wallace</a></td>
            <td>Jun 27, 2014 11:43</td>
            <td class="comment">
                                    &nbsp;
                            </td>
                        <td class="attachment-actions">
                                                <ul>
                                            <li class="first">
    
        
    
    <a  href="/pages/editattachment.action?pageId=$page.id&amp;fileName=SC-addnewVM.PNG"  class="editAttachmentLink"   title="">
                   <span>Properties</span></a>        </li>
                                            <li class="">
    
        
    
    <a  href="/pages/removeattachment.action?pageId=$page.id&amp;fileName=SC-addnewVM.PNG&amp;version=1"  class="removeAttachmentLink"   title="">
                   <span>Remove</span></a>        </li>
                                    </ul>
                            </td>
                    </tr>

            
                
        
                <tr id="attachment-238783133">
                                <td class="filename-column">
                
<span class="icon icon-file-html" title=HTML File>HTML File</span>                <a class="filename" href="/download/attachments/162731027/RE+VM+Builds+for+Request+%23297555-681400+have+been+completed.htm"
                   title="RE VM Builds for Request #297555-681400 have been completed.htm"
                   data-filename="RE VM Builds for Request #297555-681400 have been completed.htm">
                    RE VM Builds for Request #297555-68...
                </a>
            </td>
            <td>85 kB</td>
            <td><a href="/display/~awalla5075k"
                          class="url fn confluence-userlink" data-username="awalla5075k"
                   >Andrew Wallace</a></td>
            <td>Jul 01, 2014 13:37</td>
            <td class="comment">
                                    Issues setting up emmutl-po-7p.
                            </td>
                        <td class="attachment-actions">
                                                <ul>
                                            <li class="first">
    
        
    
    <a  href="/pages/editattachment.action?pageId=$page.id&amp;fileName=RE+VM+Builds+for+Request+%23297555-681400+have+been+completed.htm"  class="editAttachmentLink"   title="">
                   <span>Properties</span></a>        </li>
                                            <li class="">
    
        
    
    <a  href="/pages/removeattachment.action?pageId=$page.id&amp;fileName=RE+VM+Builds+for+Request+%23297555-681400+have+been+completed.htm&amp;version=1"  class="removeAttachmentLink"   title="">
                   <span>Remove</span></a>        </li>
                                    </ul>
                            </td>
                    </tr>

            </table>            </div>

    <div class="plugin_attachments_upload_container">
                    <div class="errorBox hidden"></div>
            <div class="successBox hidden">File uploaded successfully</div>
                        <form method="POST" class="plugin_attachments_uploadform" action="/pages/plugins/attachments/doattachfile.action?pageId=162731027" enctype="multipart/form-data">
                <input type="file" name="file_0" size="50">&nbsp;
                <input type="text" class="blank-search" name="comment_0" size="30" value="Enter a comment for this file here" maxlength="255">&nbsp;
                <input type="submit"  name="confirm" value="Attach">
                <iframe class="plugin_attachments_uploadiframe hidden" name="kGs7WSoaM8EQYKYTe0zYzjcMnb0McVcvMu8p3hxp78So5qTiEOR5r1uJT2dTNrJO" src=""></iframe>
            </form>

            </div>
</div>


<p><br class="atl-forced-newline" /></p>
    </body>
</html>